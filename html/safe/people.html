<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <!--<link rel="stylesheet" href="../../libs/bootstrap.min.css">-->
    <link rel="stylesheet" href="../../assets/mui/css/mui.min.css">
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/upload.css" />
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/mui.picker.min.css">
    <link rel="stylesheet" href="../../css/mui.poppicker.css">
    <link rel="stylesheet" type="text/css" href="../../css/icons-extra.css" />
    <script src="../../libs/jquery.min.js"></script>
    <script src="../../assets/mui/js/mui.min.js"></script>
    <script src="../../libs/vue.min.js"></script>
    <script src="../../libs/bootstrap.min.js"></script>
    <script src="../../libs/layer/layer.js"></script>
    <script src="../../libs/rem.js"></script>
    <!--<script src="../../js/public.js"></script>-->
    <!-- <script src="../../js/main.js"></script> -->
    <script src="../../js/common.js"></script>

    <!-- <script src="../../js/safe/people.js"></script> -->
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
        }

        * {
            margin: 0;
            padding: 0;
        }

        .my-header {
            height: 0.88rem;
            background-color: #51BFF7;
            color: #fff;
        }

        .my-header .mui-title {
            color: #FFF;
            font-size: 0.36rem;
        }

        .my-header a,
        .my-header h1 {
            line-height: 0.88rem;
        }

        .mui-bar-nav.mui-bar .mui-icon {
            padding: 0;
            margin: 0;
            color: #fff;
        }

        .apply {
            margin: 0 0.3rem;
            border-bottom: 1px solid #ccc;
            padding-top: 0.2rem;
            padding-bottom: 0.15rem;
            box-sizing: border-box;
        }

        .apply input {
            border: none;
            outline: none;
            color: rgba(51, 51, 51);
            font-size: 0.36rem;
            margin-top: 0.16rem;
            width: 100%;
            padding: 0px!important;
            margin-bottom: 0px;
        }

        .apply label {
            font-size: 0.24rem;
            color: rgb(148, 148, 148);

        }

        .apply label em {
            font-size: 0.24rem;
            color: rgb(255, 0, 0);
        }

        .image-item {
            float: left;
            position: relative;
            margin: 0 10px;

        }

        img {
            width: 100px;
            height: 100px;

        }

        video {
            width: 100px;
            height: 100px;

        }

        .image-close {
            position: absolute;
            display: inline-block;
            right: 0px;
            top: 0px;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
            border-radius: 12px;
            background-color: #FF5053;
            color: #f3f3f3;
            border: solid 1px #FF5053;
            font-size: 9px;
            font-weight: 200;
            z-index: 999;
        }

        .video-close {
            position: absolute;
            display: inline-block;
            right: 0px;
            top: 0px;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
            border-radius: 12px;
            background-color: #FF5053;
            color: #f3f3f3;
            border: solid 1px #FF5053;
            font-size: 9px;
            font-weight: 200;
            z-index: 999;
        }

        .video-item {
            float: left;
            position: relative;
            margin: 0 10px;
        }
        .mui-table-view:before {
            height: 0px;
        }
        .mui-table-view:after {
            height: 0px;
        }
        .addData{
            width:25%;
            display:inline-block;
            background-color:#51BFF7;
            padding:10px;
            color:#fff;
            text-align:center;
            border-radius:10px;
        }
        .upload{
            position: absolute;
            right: 0.20rem;
            top: 0.60rem;
            background-color:#51BFF7;
            padding:10px;
            color:#fff;
            text-align:center;
            border-radius:10px;
            width:25%;
        }
    </style>
</head>

<body>
    <!-- 侧滑导航根容器 -->
    <div id="app">
        <div class="mui-off-canvas-wrap mui-draggable">
            <!-- 主页面容器 -->
            <!-- 主页面标题 -->
            <header class="mui-bar mui-bar-nav my-header">
                <a href="javascript:history.go(1)" class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
                <h1 class="mui-title">人员申请管理</h1>
                <a href="javascript:;" class="mui-icon mui-pull-right" style="font-size:14px;">提交</a>
            </header>
            <div class="mui-content mui-scroll-wrapper" id="offCanvasContentScroll">
                <form>
                    <div class="apply">
                        <label>
                            <em>*</em>姓名</label>
                        <input type="text" placeholder="请输入姓名">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>性别</label>
                        <input type="text" placeholder="请选择性别" readonly="readonly" @click="sex" v-model="people.sex">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>项目部门名称</label>
                        <input type="text" placeholder="请选择部门" readonly="readonly" @click="deptName" v-model="people.deptName">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>年龄</label>
                        <input type="text" placeholder="请输入年龄">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>联系电话</label>
                        <input type="number" placeholder="请输入电话">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>学历</label>
                        <input type="text" placeholder="请选择学历" readonly="readonly" @click="degree" v-model="people.degree">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>岗位</label>
                        <input type="text" placeholder="请选择岗位" readonly="readonly" @click="position" v-model="people.position">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>类别</label>
                        <input type="text" placeholder="请选择类别" readonly="readonly" @click="category" v-model="people.category">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>职务</label>
                        <input type="text" placeholder="请选择职务" readonly="readonly" @click="job" v-model="people.job">
                    </div>
                    <div class="apply">
                        <label>
                            <em>*</em>证件管理</label>
                        <div>
                            <input type="text" placeholder="请输入证件名称" style="width:70%" v-model="newName">
                            <div @click="addData"  class="addData">添加</div>
                        </div>
                    </div>
                    <div class="apply">
                        <ul id="OA_task_1" class="mui-table-view">
                            <li class="mui-table-view-cell" v-for="(item, index) in list" :key="index" >
                                <div class="mui-slider-right mui-disabled">
                                    <a class="mui-btn mui-btn-red" @click="delImage(index)">删除</a>
                                </div>
                                <div class="mui-slider-handle">
                                    <!-- {{item.name}} -->
                                    <input type="text" class="quaName" v-model="item.quaName" placeholder="请填写附件名称" style="outline:none;border:0px;">
                                    <p>上传证件照，补充信息</p>
                                    <span  class="upload" @click="uploadImage(item.quaCode)">未上传</span>
                                </div>
                                
                            </li>
                        </ul>
                    </div>
                    <!-- <div class="apply">
                	<label><em>*</em>身份证</label>
					<ul id="photos"></ul>
					<div id="video"></div>	
					<a id="pick" href="#cropper-sheet">
						<img id="image" src="../../img/+@2x.png" style="width:100px;height:100px"/>
                    </a>
                </div> -->

                    <!-- <div class="apply">
                	<label><em>*</em>驾驶证</label>
					<ul id="photos"></ul>
					<div id="video"></div>	
					<a id="pick" href="#cropper-sheet">
						<img id="image" src="../../img/+@2x.png" style="width:100px;height:100px"/>
                    </a>
				</div> -->




                </form>
            </div>
        </div>
        <!--选择照片-->
        <div id="cropper-sheet" class="mui-popover mui-popover-bottom mui-popover-action">
            <!-- 可选择菜单 -->
            <ul class="mui-table-view margin">
                <li class="mui-table-view-cell">
                    <a id="paizhao" data-type="camera">拍照</a>
                </li>
                <li class="mui-table-view-cell">
                    <a id="luxiang" data-type="video">录像</a>
                </li>
                <li class="mui-table-view-cell">
                    <a id="xiangce" data-type="gallery">选取照片</a>
                </li>
                <li class="mui-table-view-cell">
                    <a id="shipin" data-type="galleryVideos">选取视频</a>
                </li>
            </ul>
        </div>
    </div>
    <script src="../../js/mui.picker.min.js"></script>
    <script src="../../js/mui.poppicker.js"></script>
    <script src="../../assets/mui/js/mui.zoom.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../assets/mui/js/mui.previewimage.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="../../js/cropper.min.js"></script>
    <script type="text/javascript" src="../../js/getImgs.js"></script>

    <script>


        var vm = new Vue({
            el: "#app",
            data: {
                people: {
                    sex: null,
                    deptName: null,
                    degree: null,
                    position: null,
                    category: null,
                    job: null,
                },
                setData: [
                    { value: 'a', text: '男' },
                    { value: 'b', text: '女' },
                ],
                deptData: [
                    // {value: 'a', text: '线路项目七部'},
                    // {value: 'b', text: '线路项目六部'},
                    // {value: 'c', text: '线路项目五部'},
                    // {value: 'd', text: '线路项目四部'},
                ],
                degreeData: [
                    { value: 'a', text: '博士' },
                    { value: 'b', text: '研究生' },
                    { value: 'c', text: '本科' },
                    { value: 'd', text: '大专' },
                    { value: 'e', text: '中专' },
                ],
                positionData: [
                    { value: 'a', text: '岗位1' },
                    { value: 'b', text: '岗位2' },
                    { value: 'c', text: '岗位3' },
                    { value: 'd', text: '岗位4' },
                ],
                categoryData: [
                    { value: 'a', text: '内部人员' },
                    { value: 'b', text: '外协人员' },
                ],
                jobData: [
                    { value: 'a', text: '职务1' },
                    { value: 'b', text: '职务2' },
                ],
                newName: '',
                list: [],
            },
            methods: {
                getDeptName: function () {
                    $.ajax({
                        type: "get",
                        url: baseURL + "app/foreign/deptStafftypeTechnical",
                        // data: {
                        //     page: 1,
                        //     limit: 999999
                        // },
                        // dataType: 'jsonp',
                        // crossDomain: true,
                        success: function (r) {
                            console.log(r.pageUtils.list);

                        }
                    });
                },
                //性别
                sex() {
                    let sex = new mui.PopPicker({//通过new mui.PopPicker()初始化popPicker组件
                        layer: 1   //显示列数
                    });
                    sex.setData(this.setData);  //setData() 支持数据格式为: 数组
                    sex.show(function (e) {   //e 就是总数据的数组 显示picker
                        vm.people.sex = e[0].text
                    })
                },
                deptName() {
                    vm.getDeptName();
                    let deptName = new mui.PopPicker({//通过new mui.PopPicker()初始化popPicker组件
                        layer: 1   //显示列数
                    });
                    deptName.setData(this.deptData);  //setData() 支持数据格式为: 数组
                    deptName.show(function (e) {   //e 就是总数据的数组 显示picker
                        console.log(e)
                        vm.people.deptName = e[0].text
                    })
                },
                degree() {
                    let degree = new mui.PopPicker({//通过new mui.PopPicker()初始化popPicker组件
                        layer: 1   //显示列数
                    });
                    degree.setData(this.degreeData);  //setData() 支持数据格式为: 数组
                    degree.show(function (e) {   //e 就是总数据的数组 显示picker
                        console.log(e)
                        vm.people.degree = e[0].text
                    })
                },
                position() {
                    let position = new mui.PopPicker({//通过new mui.PopPicker()初始化popPicker组件
                        layer: 1   //显示列数
                    });
                    position.setData(this.positionData);  //setData() 支持数据格式为: 数组
                    position.show(function (e) {   //e 就是总数据的数组 显示picker
                        vm.people.position = e[0].text
                    })
                },
                category() {
                    let category = new mui.PopPicker({//通过new mui.PopPicker()初始化popPicker组件
                        layer: 1   //显示列数
                    });
                    category.setData(this.categoryData);  //setData() 支持数据格式为: 数组
                    category.show(function (e) {   //e 就是总数据的数组 显示picker
                        vm.people.category = e[0].text
                    })
                },
                job() {
                    let job = new mui.PopPicker({//通过new mui.PopPicker()初始化popPicker组件
                        layer: 1   //显示列数
                    });
                    job.setData(this.jobData);  //setData() 支持数据格式为: 数组
                    job.show(function (e) {   //e 就是总数据的数组 显示picker
                        vm.people.job = e[0].text
                    })
                },
                addData() {
                    this.list.push({
                        quaName: this.newName,
                        quaCode:1,
                    })
                },
                delImage(idx){
                    this.list.splice(idx, 1)
                    alert('123')
                },
                uploadImage(id){
                    window.location.href="uploadImage.html"+"?quaCode="+id
                    window.localStorage.name="?quaCode="+id
                }


            }
        });

        mui('#offCanvasSideScroll').scroll();
        mui('#offCanvasContentScroll').scroll();
        mui.init({
            swipeBack: true //启用右滑关闭功能  
        });
        mui.init();
        var address;
        mui.previewImage()
        mui.plusReady(function () {
            //上传图片
            createUploader();
        })
        mui('#cropper-sheet').on('tap', '.mui-table-view-cell > a', function () {
            var type = this.getAttribute('data-type');
            mui("#cropper-sheet").popover('hide');
            switch (type) {
                case 'camera':
                    clickCamera();
                    break;
                case 'gallery':
                    clickGallery();
                    break;
                case 'video':
                    clickVideo();
                    break;
                case 'galleryVideos':
                    galleryVideo();
                default:
                    break;
            }
        })

            // mui.init();
            // (function ($) {
            //     $('#OA_task_1').on('tap', '.mui-btn', function (event) {
            //         var elem = this;
            //         var li = elem.parentNode.parentNode;
            //         mui.confirm('确认删除该条记录？',  function (e) {
            //             if (e.index == 0) {
            //                 li.parentNode.removeChild(li);
            //             } else {
            //                 setTimeout(function () {
            //                     $.swipeoutClose(li);
            //                 }, 0);
            //             }
            //         });
            //     });
            // })(mui);


    </script>
</body>

</html>